{
  "name": "Novel2Manga TypeScript Development",
  "image": "mcr.microsoft.com/devcontainers/typescript-node:20-bullseye",

  "features": {
    "ghcr.io/devcontainers/features/git:1": {},
    "ghcr.io/devcontainers/features/github-cli:1": {},
    "ghcr.io/devcontainers/features/docker-in-docker:2": {},
    "ghcr.io/devcontainers/features/node:1": {
      "version": "20.19.4",
      "nodeGypDependencies": true
    }
  },

  "customizations": {
    "vscode": {
      "extensions": [
        "ms-vscode.vscode-typescript-next",
        "bradlc.vscode-tailwindcss",
        "esbenp.prettier-vscode",
        "biomejs.biome",
        "ms-playwright.playwright",
        "ms-vscode.vscode-json",
        "ms-vscode.vscode-yaml",
        "ms-vscode.vscode-sqlite",
        "ms-vscode.vscode-docker",
        "ms-vscode.vscode-github",
        "ms-vscode.vscode-git",
        "ms-vscode.vscode-git-graph",
        "ms-vscode.vscode-gitlens",
        "ms-vscode.vscode-test-explorer",
        "ms-vscode.vscode-vitest",
        "ms-vscode.vscode-playwright"
      ],
      "settings": {
        "typescript.preferences.includePackageJsonAutoImports": "on",
        "typescript.suggest.autoImports": true,
        "editor.formatOnSave": true,
        "editor.defaultFormatter": "biomejs.biome",
        "editor.codeActionsOnSave": {
          "quickfix.biome": "explicit",
          "source.organizeImports.biome": "explicit"
        },
        "files.associations": {
          "*.sql": "sql"
        },
        "emmet.includeLanguages": {
          "typescript": "html",
          "typescriptreact": "html"
        },
        "cursor.aiEnabled": true,
        "cursor.copilotEnabled": true,
        "cursor.indexing.enabled": true
      }
    }
  },

  "forwardPorts": [3000, 8788],
  "portsAttributes": {
    "3000": {
      "label": "Next.js Dev Server",
      "onAutoForward": "notify"
    },
    "8788": {
      "label": "Wrangler Dev Server",
      "onAutoForward": "notify"
    }
  },

  "postCreateCommand": "bash .devcontainer/post-create.sh",
  "postStartCommand": "npm run db:generate",

  "remoteUser": "node",
  "workspaceMount": "source=${localWorkspaceFolder},target=/workspace,type=bind,consistency=cached",
  "workspaceFolder": "/workspace",

  "mounts": [
    "source=${localWorkspaceFolder}/.devcontainer/.bashrc,target=/home/node/.bashrc,type=bind,consistency=cached"
  ],

  "environmentVariables": {
    "NODE_ENV": "development",
    "NEXT_TELEMETRY_DISABLED": "1",
    "DISABLE_REMOTE_FONTS": "1"
  }
}
